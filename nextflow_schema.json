{
    "$schema": "http://json-schema.org/draft-07/schema",
    "$id": "https://raw.githubusercontent.com/./master/nextflow_schema.json",
    "title": "epi2me-labs/wf-mpx",
    "description": "A basic workflow for Monkeypox analysis.",
    "url": "https://github.com/epi2me-labs/wf-mpx",
    "type": "object",
    "definitions": {
        "basic_input_output_options": {
            "title": "Basic Input/Output Options",
            "type": "object",
            "fa_icon": "fas fa-terminal",
            "description": "Define where the pipeline should find input data and save output data.",
            "properties": {
                "out_dir": {
                    "type": "string",
                    "default": "output",
                    "format": "directory-path",
                    "description": "Directory for output of all user-facing files."
                },
                "fastq": {
                    "type": "string",
                    "format": "path",
                    "description": "A fastq file or directory containing fastq input files or directories of input files.",
                    "help_text": "If directories named \\\"barcode*\\\" are found under the `--fastq` directory the data is assumed to be multiplex and each barcode directory will be processed independently. If `.fastq(.gz)` files are found under the `--fastq` directory the sample is assumed to not be multiplexed. In this second case `--samples` should be a simple name rather than a CSV file."
                },
                "sample": {
                    "type": "string",
                    "description": "A sample name for non-multiplexed data. Permissible if passing a file or directory of .fastq(.gz)."
                },
                "sample_sheet": {
                    "type": "string",
                    "format": "file-path",
                    "description": "CSV file with columns named `barcode`, `sample_name` and `type`. Permissible if passing a directory containing barcodeXX sub-directories."
                },
                "assembly": {
                    "type": "boolean",
                    "description": "Switch to perform assembly with flye.",
                    "default": true
                },
                "medaka_options": {
                    "type": "string",
                    "description": "Pass through options to medaka."
                },
                "min_coverage": {
                    "type": "number",
                    "description": "Coverage threshold for masking in the consensus step.",
                    "default": 20
                },
                "reference": {
                    "type": "string",
                    "description": "The reference genome to use for mapping.",
                    "enum": [
                        "MN648051.1",
                        "MT903344.1",
                        "ON568298.1",
                        "ON563414.1"
                    ],
                    "default": "MT903344.1"
                },
                "threads": {
                    "type": "number",
                    "description": "Number of threads to use.",
                    "default": 4
                }
            },
            "required": [
                "fastq"
            ]
        },
        "meta_data": {
            "title": "Meta Data",
            "type": "object",
            "description": "",
            "default": "",
            "properties": {
                "report_name": {
                    "type": "string",
                    "default": "report",
                    "description": "Output report filename suffix."
                },
                "disable_ping": {
                    "type": "boolean",
                    "default": "false",
                    "description": "Enable to prevent sending a workflow ping."
                }
            }
        },
        "generic_options": {
            "title": "Generic options",
            "type": "object",
            "fa_icon": "far fa-question-circle",
            "description": "Less common options for the pipeline, typically set in a config file.",
            "help_text": "These options are common to all nf-core pipelines and allow you to customise some of the core preferences for how the pipeline runs.\n\nTypically these options would be set in a Nextflow config file loaded for all pipeline runs, such as `~/.nextflow/config`.",
            "properties": {
                "help": {
                    "type": "boolean",
                    "description": "Display help text.",
                    "fa_icon": "fas fa-question-circle",
                    "hidden": true
                }
            }
        }
    },
    "allOf": [
        {
            "$ref": "#/definitions/basic_input_output_options"
        },
        {
            "$ref": "#/definitions/meta_data"
        },
        {
            "$ref": "#/definitions/generic_options"
        }
    ],
    "properties": {
        "process_label": {
            "type": "string",
            "description": "The main process label for template processes to use by default",
            "hidden": true,
            "default": "wf-mpx"
        },
        "aws_image_prefix": {
            "type": "string",
            "hidden": true
        },
        "aws_queue": {
            "type": "string",
            "hidden": true
        },
        "wfversion": {
            "type": "string",
            "default": "v0.0.5",
            "hidden": true
        },
        "_reference": {
            "type": "string",
            "hidden": true
        },
        "_genbank": {
            "type": "string",
            "hidden": true
        },
        "monochrome_logs": {
            "type": "boolean"
        },
        "validate_params": {
            "type": "boolean",
            "default": true
        },
        "show_hidden_params": {
            "type": "boolean"
        }
    },
    "docs": {
        "intro": "## Introduction\n\nThis workflow provides a simple way to analyse Monkeypox sequencing data; taking\nraw Oxford Nanopore Technologies reads and creating a draft consensus and assembly.\n\n> No trimming of sequences is carried out so be vigilant when using targeted data.\n\nUsing community develped tools this workflow:\n* Maps reads to a reference genome (`minimap2`)\n* Assesses coverage\n* Discards reads not mapping to the chosen reference\n* Calls variants with resepect to reference (`medaka`)\n* Filters variants with <20x coverage\n* Creates a draft consensus (`bcftools`)\n* Creats a de-novo assembly (`flye` & `medaka`)\n\nMore information can be found in this [blog post](https://labs.epi2me.io/basic-monkeypox-workflow).\n",
        "links": "## Useful links\n\n* [nextflow](https://www.nextflow.io/)\n* [docker](https://www.docker.com/products/docker-desktop)\n* [singularity](https://docs.sylabs.io/guides/3.0/user-guide/index.html)\n"
    }
}